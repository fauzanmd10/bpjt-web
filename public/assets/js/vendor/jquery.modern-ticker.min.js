/**
 * Modern News Ticker
 * www.CreativeTier.com
 * contact@CreativeTier.com
 * Copyright (c) CreativeTier
 */
(function(a){var b={init:function(b){var c={feedType:"none",effect:"scroll",autoplay:true};var d={"rss-atom":{feedUrl:"",feedCount:5},twitter:{twitterName:"",feedCount:5}};var e={scroll:{scrollInterval:20,transitionTime:500},fade:{displayTime:4e3,transitionTime:300},type:{typeInterval:10,displayTime:4e3,transitionTime:300},slide:{slideDistance:100,displayTime:4e3,transitionTime:350}};a.extend(c,{feedType:b.feedType});a.extend(c,d[c.feedType]);a.extend(c,{effect:b.effect});a.extend(c,e[c.effect]);a.extend(c,b);return this.each(function(){function q(){switch(c.feedType){case"rss-atom":a.ajax({url:"../../../https@ajax.googleapis.com/ajax/services/feed/load@v=1.0&num="+c.feedCount+"&q="+c.feedUrl,type:"GET",dataType:"jsonp",success:function(a){var b=a.responseData.feed.entries;for(var c=0;c<b.length;c++){k.append("<li><a href='"+b[c].link+"' target='_blank'>"+b[c].title+"</a></li>")}}});break;case"twitter":a.ajax({url:"../../../api.twitter.com/1/statuses/user_timeline.json",type:"GET",dataType:"jsonp",data:{screen_name:c.twitterName,count:c.feedCount,trim_user:true},success:function(a){for(var b=0;b<a.length;b++){k.append("<li><a href='../../../twitter.com/#!/"+a[b].user.id_str+"/status/"+a[b].id_str+"' target='_blank'>"+a[b].text+"</a></li>")}}});break}}function r(a){s(a.data.type)}function s(b){if(!f){f=true;v();if(b=="prev"){switch(c.effect){case"scroll":k.css({"margin-left":-a(k.children(":last")).outerWidth()}).children(":last").prependTo(k);k.animate({"margin-left":0},c.transitionTime,function(){f=false;m.mouseleave(function(){w()})});break;case"fade":k.children(":first").animate({opacity:0},c.transitionTime,function(){a(this).css("display","none");k.children(":last").prependTo(k).css({display:"block",opacity:0}).animate({opacity:1},c.transitionTime,function(){w()});f=false});break;case"type":k.children(":first").animate({opacity:0},c.transitionTime,function(){a(this).css("display","none");x(k.children(":last").prependTo(k).css({display:"block",opacity:0}).animate({opacity:1},c.transitionTime).children("a"));f=false});break;case"slide":k.children(":first").animate({opacity:0},c.transitionTime,function(){a(this).css("display","none");k.children(":last").prependTo(k).css({display:"block",opacity:0,"margin-left":c.slideDistance}).animate({opacity:1,"margin-left":0},c.transitionTime,function(){w()});f=false});break}}else{switch(c.effect){case"scroll":k.animate({"margin-left":-a(k.children(":first")).outerWidth()},c.transitionTime,function(){k.css("margin-left",0).children(":first").appendTo(k);f=false;n.mouseleave(function(){w()})});break;case"fade":k.children(":first").animate({opacity:0},c.transitionTime,function(){a(this).css("display","none").appendTo(k);k.children(":first").css({display:"block",opacity:0}).animate({opacity:1},c.transitionTime,function(){w()});f=false});break;case"type":k.children(":first").animate({opacity:0},c.transitionTime,function(){a(this).css("display","none").appendTo(k);x(k.children(":first").css({display:"block",opacity:0}).animate({opacity:1},c.transitionTime).children("a"));f=false});break;case"slide":k.children(":first").animate({opacity:0},c.transitionTime,function(){a(this).css("display","none").appendTo(k);k.children(":first").css({display:"block",opacity:0,"margin-left":c.slideDistance}).animate({opacity:1,"margin-left":0},c.transitionTime,function(){w()});f=false});break}}}}function t(){d=true;if(c.effect=="scroll"){b=setInterval(function(){var b=parseFloat(k.css("margin-left"))-1;k.css("margin-left",b);if(Math.abs(b)>a(k.children("li")[0]).outerWidth()){k.css("margin-left",0).children(":first").appendTo(k)}},c.scrollInterval)}else{b=setInterval(function(){s("next")},c.displayTime)}}function u(){d=false;clearInterval(b)}function v(){if(d){e=true;u()}}function w(){if(e&&!g){t();e=false}}function x(a){var b=a.html().split("");var d=0;a.html("_");var e=setInterval(function(){var c=a.html().split("_")[0]+b[d++];if(d!=b.length){c+="_"}a.html(c);if(d==b.length){clearInterval(e);w()}},c.typeInterval)}function y(){o.addClass("mticker-pause")}function z(){o.removeClass("mticker-pause")}var b;var d=false;var e=false;var f=false;var g=false;var h=a(this);var i=h.children(".mticker-label");var j=h.children(".mticker-news");var k=j.children("ul");var l=h.children(".mticker-controls");var m=l.children(".mticker-prev");var n=l.children(".mticker-next");var o=l.children(".mticker-play");if(c.effect=="scroll"){h.addClass("mticker-scroll")}i.css("width",i.width());if(a.browser.msie&&parseInt(a.browser.version)<=7){l.css({"float":"none",position:"absolute",right:h.css("padding-right")})}var p=h.width();if(i.length){p-=i.outerWidth()+parseFloat(i.css("margin-right"))}if(l.length){p-=l.outerWidth()+parseFloat(l.css("margin-left"))}j.css("width",p);if(c.effect!="scroll"){k.children("li:not(:first)").css("display","none")}j.hover(function(){v();g=true},function(){g=false;w()});m.bind("click",{type:"prev"},r);n.bind("click",{type:"next"},r);o.click(function(){if(d){u();z()}else{t();y()}});if(c.feedType!="none"){q()}if(c.autoplay){t();y()}h.data("pause",v);h.data("resume",w)})},pause:function(){return this.each(function(){a(this).data("pause")()})},resume:function(){return this.each(function(){a(this).data("resume")()})}};a.fn.modernTicker=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof c==="object"||!c){return b.init.apply(this,arguments)}else{a.error("Method "+c+" does not exist on jQuery.modernTicker")}}})(jQuery)